
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reset password Â· v1.1.0</title>
  <link rel="stylesheet" href="/theme.css" />
  <link rel="stylesheet" href="/styles.css" />
  <link rel="stylesheet" href="/game-theme.css" />
</head>
<body>
  <div class="container narrow">
    <header><h1>Reset your password</h1><div id="ver" class="muted"></div></header>
    <form id="form">
      <label>Email <input id="email" type="email" required /></label>
      <div class="actions"><button type="submit" class="btn btn-primary">Send reset link</button></div>
    </form>
    <div id="status" class="muted"></div>
  </div>
  <script>
    (async () => {
      try{
        const { version } = await fetch('/api/version').then(r=>r.json());
        document.getElementById('ver').textContent = 'v' + version;
      }catch{}
    })();
    const $ = s => document.querySelector(s);
    $("#form").addEventListener("submit", async (e) => {
      e.preventDefault();
      try{
        const res = await fetch("/api/auth/request-reset", {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({ email: $("#email").value.trim() })
        });
        await res.json();
        document.getElementById("status").textContent = "If that account exists, we emailed a reset link.";
        $("#form").classList.add("hidden");
      }catch(err){
        document.getElementById("status").textContent = "Something went wrong.";
      }
    });
  </script>
</body>
</html>
