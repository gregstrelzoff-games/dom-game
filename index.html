<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Dominion POC â€” Player vs AI (v8.6.3 GREG ) [Build 05 â€” 2025-08-12]</title>
<link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAukB9GLZP2UAAAAASUVORK5CYII=" rel="icon"/>
<link as="style" href="/styles/base.css" rel="preload"/>
<style>:root{/* Requested palette */ --bg:#ECF2FF; /* Background */ --text:#0B0F14; /* Primary text */ --sub:#334155; /* Subtle text */ --panel:#FFFFFF; /* Foreground cards/panels */ --panel2:#F8FAFF; /* Slight panel gradient tail */ --outline:#CBD5E1; /* Borders */ --shadow:0 10px 24px rgba(2,6,23,.06); --accent:#0EA5E9; /* Buttons & highlights */ --accent-strong:#0284C7; /* Button border / hover */ --danger:#EF4444; --mint:#10B981; /* Minty log */ --chat:#FFFFFF; /* Chat surface on light */ --tipbg:#111827; /* Tooltip/dialog background (requested) */ --tipborder:#1F2937; /* Tooltip/dialog border */ --countBadge:#0F172A; /* Dark badge on light */} *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:14px system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial} h1{font-size:22px;margin:12px 0 6px;color:var(--text)} .app{max-width:1200px;margin:18px auto;padding:12px} /* Header */ .topbar{display:flex;align-items:flex-start;gap:16px;justify-content:space-between;background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--outline);border-radius:14px;padding:12px 16px;box-shadow:var(--shadow)} .top-left h1{margin:0} .control-line{margin-top:6px;color:var(--text)} .pill{display:inline-flex;gap:8px;align-items:center;background:#F1F5F9;border:1px solid var(--outline);border-radius:999px;padding:6px 10px} .toggle input, .toggle select{accent-color:var(--accent);background:#FFFFFF;border:1px solid var(--outline);color:var(--text);border-radius:8px;padding:6px 8px} .toggle select{padding-right:24px} .topbar-right{display:flex;flex-direction:column;align-items:stretch;gap:8px;width:260px} .btn{background:var(--accent);border:1px solid var(--accent-strong);border-radius:10px;padding:10px 12px;color:#fff;cursor:pointer;transition:transform .06s ease, filter .12s ease;width:100%;box-shadow:0 6px 18px rgba(14,165,233,.18)} .btn:hover{filter:brightness(1.05)} .btn:active{transform:translateY(1px)} .sound-controls{display:flex;gap:8px;align-items:center;background:#F1F5F9;border:1px solid var(--outline);border-radius:10px;padding:8px 10px;color:var(--text);width:100%} .sound-controls input[type="range"]{width:100%} .row{display:grid;grid-template-columns:1.2fr .8fr;gap:16px;margin-top:16px} .panel{background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--outline);border-radius:14px;box-shadow:var(--shadow);color:var(--text)} .panel h2{font-size:16px;margin:0;padding:10px 12px;border-bottom:1px solid var(--outline);color:var(--text)} /* Play Area soft vignette subtle on light */ .playArea{position:relative;overflow:hidden} .playArea::after{content:"";position:absolute;inset:-20%;background:radial-gradient(600px 220px at 50% 10%, rgba(2,6,23,.06), rgba(2,6,23,0) 70%);pointer-events:none} /* Status */ .stats{display:flex;gap:12px;align-items:center;color:var(--sub);flex-wrap:wrap} .pill strong{color:var(--text)} .stats-rows{padding:12px} .stats-rows .stats{margin:4px 0} .score{font-weight:800;color:#0369A1;font-size:16px} /* Supply */ .supplySections{padding:12px} .supplySection{padding:12px 0;border-top:1px solid var(--outline)} .supplySection:first-child{border-top:0} .supplySection h3{margin:0 0 8px;color:#0F172A;font-size:13px;letter-spacing:.05em;text-transform:uppercase} .supplyGrid{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:10px} .pile{background:#FFFFFF;border:1px solid var(--outline);border-radius:12px;padding:10px;cursor:pointer;transition:transform .08s ease, box-shadow .08s ease;position:relative;box-shadow:0 8px 20px rgba(2,6,23,.04)} .pile:hover{transform:translateY(-1px);box-shadow:0 10px 24px rgba(2,6,23,.08)} .pile .name{display:flex;flex-direction:column;align-items:flex-start;gap:4px;padding-right:46px} .pile .name .icon{font-size:18px} .pile .name .label{font-weight:700;color:var(--text)} .pile .meta{font-size:12px;color:var(--sub)} .pile .count{position:absolute;right:8px;top:8px;background:#E2E8F0;border:1px solid #CBD5E1;border-radius:999px;padding:2px 8px;font-size:12px;color:#0F172A} .pile.disabled{opacity:.65;cursor:not-allowed} .pile.empty{background:repeating-linear-gradient(135deg,#FEE2E2,#FEE2E2 10px,#FECACA 10px,#FECACA 20px);border-color:var(--danger)} .pile.empty .count{background:#FECACA;border-color:#FCA5A5;color:#7F1D1D} .pile.empty::after{content:'EMPTY';position:absolute;left:-6px;top:8px;transform:rotate(-12deg);background:#FEE2E2;border:1px dashed var(--danger);color:#7F1D1D;font-weight:700;padding:2px 6px;border-radius:6px;font-size:11px} /* Buyable highlight */ @keyframes pulseGlow{0%{box-shadow:0 0 0 0 rgba(14,165,233,.35)}70%{box-shadow:0 0 0 10px rgba(14,165,233,0)}100%{box-shadow:0 0 0 0 rgba(14,165,233,0)}} .pile.buyable{outline:2px solid var(--accent); animation:pulseGlow 1.6s ease-out infinite} /* Hand */ .hand{display:flex;flex-wrap:wrap;gap:10px;padding:12px} .card{min-width:128px;background:#FFFFFF;border:1px solid var(--outline);border-radius:12px;padding:10px;box-shadow:0 8px 20px rgba(2,6,23,.04);cursor:default;position:relative} .card .title{font-weight:700;margin-bottom:6px;color:var(--text)} .card .type{font-size:12px;color:var(--sub)} .card.playable{outline:2px solid var(--accent);cursor:pointer} .card.disabled{opacity:.6;cursor:not-allowed;outline:none} .log{min-height:28px;padding:10px 12px;color:#0F172A;white-space:pre-wrap} .log .mint{color:var(--mint)} .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size:12px; white-space:pre-wrap} .toast{position:fixed;bottom:18px;right:18px;background:#111827;border:1px solid #1F2937;color:#fff;padding:10px 14px;border-radius:12px;box-shadow:0 10px 24px rgba(2,6,23,.35);opacity:0;transform:translateY(12px);transition:opacity .18s ease, transform .18s ease} .toast.show{opacity:1;transform:translateY(0)} .build{position:fixed;right:10px;bottom:8px;font-size:12px;color:#0369A1;pointer-events:none;font-weight:800;text-shadow:0 0 12px rgba(2,132,199,.35)} /* Counts */ .countsList{font-size:14px;line-height:1.35;color:var(--text);padding:12px} .countGroup{margin-bottom:8px} .countsList .row{display:flex;justify-content:space-between;margin:0;line-height:1.2} .countsList .label{color:var(--text)} .countsList .sub{font-size:12px;color:var(--sub);margin:0 0 2px} .countsList .totalWrap{display:flex;flex-direction:column;align-items:flex-end} .countsList .mini{font-size:10px;text-transform:uppercase;letter-spacing:.06em;color:var(--sub)} .countsList .totalNum{font-size:16px;color:var(--text)} /* Modal / Dialogs (requested dark) */ .overlay{position:fixed;inset:0;background:rgba(2,6,23,.45);display:none;align-items:center;justify-content:center;z-index:9000} .overlay.show{display:flex} .modal{background:var(--tipbg);border:1px solid var(--tipborder);border-radius:16px;box-shadow:0 20px 60px rgba(2,6,23,.5);padding:18px 18px 14px;max-width:620px;min-width:360px;display:flex;flex-direction:column;align-items:center;text-align:center;color:#E5E7EB} .modal h3{margin:0 0 6px;font-size:22px;color:#fff} .modal p{margin:6px 0 14px;color:#D1D5DB} .modal .footer{margin-top:10px;width:100%;display:flex;justify-content:center} /* Tooltip (dark to match dialogs) */ .tooltip{position:fixed;z-index:10050;display:none;max-width:260px;background:var(--tipbg);border:1px solid var(--tipborder);border-radius:10px;box-shadow:0 16px 36px rgba(2,6,23,.35);padding:8px 10px;color:#E5E7EB} .tooltip .tTitle{font-weight:700;margin-bottom:4px;color:#fff} .tooltip .tMeta{font-size:12px;color:#CBD5E1} /* Chat bot (light surface) */ .chat-panel{position:fixed;right:18px;bottom:88px;width:320px;max-height:60vh;display:flex;flex-direction:column;background:var(--chat);border:1px solid var(--outline);border-radius:14px;box-shadow:var(--shadow);overflow:hidden;z-index:10020;color:var(--text)} .chat-head{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:#F1F5F9;border-bottom:1px solid var(--outline);color:var(--text)} .chat-head .title{font-weight:700} .chat-body{padding:10px;overflow:auto;display:flex;flex-direction:column;gap:8px} .msg{display:flex;gap:8px;align-items:flex-start} .msg .bubble{padding:8px 10px;border-radius:10px;max-width:240px} .msg.bot .bubble{background:#E0F2FE;border:1px solid #BAE6FD;color:#0B0F14} .msg.user{justify-content:flex-end} .msg.user .bubble{background:#DBEAFE;border:1px solid #93C5FD;color:#0B0F14} .chat-input{display:flex;gap:6px;padding:10px;border-top:1px solid var(--outline);background:#F8FAFF} .chat-input input{flex:1;background:#FFFFFF;color:var(--text);border:1px solid var(--outline);border-radius:10px;padding:8px} .chat-input button{background:var(--accent);color:#fff;border:1px solid var(--accent-strong);border-radius:10px;padding:8px 10px;cursor:pointer}</style>
<script type="module">// ------------------- Build Tag & Favicon -------------------
const BUILD = { num: 'v8.6.2', date: new Date().toLocaleDateString(undefined,{year:'numeric',month:'short',day:'2-digit'}) };
(function(){
  document.getElementById('build').textContent = `Build ${BUILD.num} â€¢ ${BUILD.date}`;
  // Use provided G.png as favicon when available  lets try again
  const candidates = ['G.png','./G.png','/mnt/data/G.png'];
  (function tryNext(i){ if(i>=candidates.length) return; const img=new Image(); img.onload=()=> setFav(candidates[i]); img.onerror=()=> tryNext(i+1); img.src=candidates[i]; })(0);
})();

  resume(){ try{ this.ensure(); if(this.ctx && this.ctx.state==='suspended') this.ctx.resume(); }catch(e){} },
  setVolume(v){ this.vol = v; if(this.master && !this.muted) this.master.gain.value = this.vol; this.persist(); },
  setMuted(m){ this.muted = m; if(this.master) this.master.gain.value = this.muted?0:this.vol; this.persist(); },
  persist(){ try{ localStorage.setItem(this.key, JSON.stringify({vol:this.vol, muted:this.muted})); }catch(e){} },
  load(){ try{ const s = JSON.parse(localStorage.getItem(this.key)||'null'); if(s){ this.vol = s.vol??this.vol; this.muted = !!s.muted; } }catch(e){} },
  now(){ this.ensure(); return this.ctx? this.ctx.currentTime : 0; },
  env(node, t, a=0.005, d=0.08, s=0.0, r=0.12, g=0.5){ const gnode = this.ctx.createGain(); node.connect(gnode); gnode.connect(this.master); const v = g; gnode.gain.setValueAtTime(0, t); gnode.gain.linearRampToValueAtTime(v, t+a); gnode.gain.linearRampToValueAtTime(v*s, t+a+d); gnode.gain.linearRampToValueAtTime(0.0001, t+a+d+r); },
  tone(freq=440, dur=0.12, type='sine', gain=0.5){ if(!this.ctx || this.muted) return; const t=this.now(); const o=this.ctx.createOscillator(); o.type=type; o.frequency.setValueAtTime(freq, t); this.env(o,t,0.005, dur*0.6, 0.0, dur*0.4, gain); o.start(t); o.stop(t+dur+0.2); },
  chirp(f1=300, f2=900, dur=0.15, type='triangle', gain=0.35){ if(!this.ctx || this.muted) return; const t=this.now(); const o=this.ctx.createOscillator(); o.type=type; o.frequency.setValueAtTime(f1, t); o.frequency.linearRampToValueAtTime(f2, t+dur); this.env(o,t,0.005, dur*0.7, 0.0, 0.12, gain); o.start(t); o.stop(t+dur+0.2); },
  seq(notes){ if(!this.ctx || this.muted) return; const base=this.now(); notes.forEach(n=>{ const t=base+(n.t||0); const o=this.ctx.createOscillator(); o.type=n.type||'sine'; o.frequency.setValueAtTime(n.f, t); this.env(o,t,0.005,(n.d||0.1)*0.7,0.0,(n.d||0.1)*0.3,n.g||0.4); o.start(t); o.stop(t+(n.d||0.1)+0.2); }); },
  play(kind){ switch(kind){ case 'draw': this.chirp(320,520,0.08,'triangle',0.25); break; case 'action': this.chirp(420,860,0.12,'triangle',0.35); break; case 'coins': this.seq([{t:0,f:900,d:0.05,g:0.35,type:'square'},{t:0.06,f:1200,d:0.05,g:0.25,type:'square'}]); break; case 'buy': this.seq([{t:0,f:660,d:0.1,g:0.35},{t:0.12,f:990,d:0.1,g:0.25}]); break; case 'shuffle': this.noise(0.25,0.22,[200,3000]); break; case 'attack': this.seq([{t:0,f:220,d:0.14,g:0.4,type:'sawtooth'},{t:0.1,f:180,d:0.12,g:0.35,type:'sawtooth'}]); break; case 'reaction': this.chirp(500,1000,0.16,'sine',0.3); break; case 'error': this.tone(140,0.18,'sawtooth',0.35); break; case 'end': this.seq([{t:0,f:660,d:0.1,g:0.35},{t:0.12,f:880,d:0.12,g:0.35},{t:0.26,f:1320,d:0.16,g:0.25}]); break; } }
};

  Copper:    { name:'Copper',    cost:0, type:'Treasure', value:1, desc:'+1 coin' },
  Silver:    { name:'Silver',    cost:3, type:'Treasure', value:2, desc:'+2 coins' },
  Gold:      { name:'Gold',      cost:6, type:'Treasure', value:3, desc:'+3 coins' },
  Festival:  { name:'Festival',  cost:5, type:'Action',   desc:'+2 actions, +1 buy, +2 coins',
  Woodcutter:{ name:'Woodcutter',cost:3, type:'Action',   desc:'+1 buy, +2 coins',
};

const SUPPLY = [
  { key:'Copper',   count:60 },
  { key:'Silver',   count:40 },
  { key:'Gold',     count:30 },
  { key:'Estate',   count:24 },
  { key:'Duchy',    count:12 },
  { key:'Province', count:12 },
  { key:'Market',   count:10 },
  { key:'Festival', count:10 },
  { key:'Woodcutter',count:10 },
  { key:'Workshop', count:10 },
];

  autoAdvance:true,
  debugAI:false,
  aiActions:1, aiBuys:1, aiCoins:0,
  aiMode:'strong',
  undo:null,
  undoForbidden:null,
  suppressAutoAdvanceOnce:false,
  interactionLock:false,
  turnNum:1,
};

// ------------------- Log & Tooltip -------------------
const LOG_MAX = 10; let LOG_SILENT=false; const logs = [];
function addLog(msg, cls){ if(LOG_SILENT) return; logs.push({msg, cls}); while(logs.length>LOG_MAX) logs.shift(); const el = document.getElementById('log'); if(el) el.innerHTML = logs.map(l=>`<span class="${l.cls||''}">â€¢ ${l.msg}</span>`).join('\n'); }
function toast(msg){ const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), 1800); }

const tip = document.getElementById('tooltip');
function showTip(html, x, y){ tip.innerHTML = html; tip.style.display='block'; const pad=10; const w=260; const h= tip.offsetHeight||100; let left = Math.min(window.innerWidth - w - pad, x + 14); let top  = Math.min(window.innerHeight - h - pad, y + 14); tip.style.left = left + 'px'; tip.style.top = top + 'px'; }
function hideTip(){ tip.style.display='none'; }

// ------------------- Helpers -------------------
function deepClone(obj){ return JSON.parse(JSON.stringify(obj)); }
function vpOfPile(pile){ return pile.reduce((sum,c)=> sum + (c.points||0), 0); }

function isChoiceOpen(){ return document.getElementById('choiceOverlay').classList.contains('show'); }

function emptyPileCount(){ return SUPPLY.reduce((n,p)=> n + (p.count===0?1:0), 0); }
function getPile(name){ return SUPPLY.find(p=>p.key===name); }


let lastCountsHTML = '';

// ---------- Debug helpers ----------

// ------------------- Choice overlay (Workshop) -------------------
function openGainChoice(maxCost, actor, source){
  const over = document.getElementById('choiceOverlay');
  const grid = document.getElementById('choiceGrid'); grid.innerHTML = '';
  eligible.forEach(pile=>{
    const el = document.createElement('div'); el.className='pile';
    el.innerHTML = `
      <div class=\"count\">${pile.count}</div>
      <div class=\"name\">
        <div class=\"label\">${def.name}</div>
      </div>
      <div class=\"meta\">Cost: ${def.cost}</div>
    `;
    el.onclick = ()=>{
      addLog(`You gained ${def.name} with ${source}.`);
      over.classList.remove('show');
    };
    grid.appendChild(el);
  });
  over.classList.add('show');
}

// ------------------- Undo -------------------
function updateUndoUI(){ const b = document.getElementById('undoBtn'); if(b) b.disabled = !canUndo(); }

// ------------------- Init -------------------
function init(){
  for(let i=0;i<5;i++){ drawOne(p); drawOne(a); }

  // Top-right controls
  document.getElementById('tutorialBtn').onclick = ()=>{ Coach.ensureInit(); Coach.restart(); };

  const v = document.getElementById('vol'); const m = document.getElementById('muteToggle');

  updateUndoUI();
  render();
  Chat.init();
  Coach.init(); Coach.maybeStart();
  setTimeout(sanityCheck, 0);
}

// ------------------- Rendering -------------------
function render(){
  syncLockFromOverlay();
  const {p,a} = computeScores();
  document.getElementById('pScore').textContent = p;
  document.getElementById('aScore').textContent = a;

  // SUPPLY
  const s = document.getElementById('supply'); s.innerHTML='';
  const sortMetric = (def, type)=> type==='Victory' ? (def.points||0) : def.cost;
  groups.forEach(g=>{
    const sec = document.createElement('div'); sec.className='supplySection';
    const h = document.createElement('h3'); h.textContent = g.title; sec.appendChild(h);
    const grid = document.createElement('div'); grid.className='supplyGrid'; sec.appendChild(grid);

      .forEach(pile=>{
        const el = document.createElement('div'); el.className='pile'; if(pile.count===0) el.classList.add('empty');
        el.innerHTML = `
          <div class=\"count\">${pile.count}</div>
          <div class=\"name\">
            <div class=\"label\">${def.name}</div>
          </div>
          <div class=\"meta\">Cost: ${def.cost}</div>
        `;
        if(canBuy){ el.onclick = ()=>buy(def.name); el.classList.remove('disabled'); el.classList.add('buyable'); }
        else { el.classList.add('disabled'); el.classList.remove('buyable'); el.onclick = null; }
        grid.appendChild(el);
      });
    s.appendChild(sec);
  });

  // HAND
  const groupRank = { Action:0, Treasure:1, Victory:2 };
  indexed.sort((a,b)=>{ const ga = groupRank[a.c.type] ?? 3; const gb = groupRank[b.c.type] ?? 3; if(ga!==gb) return ga-gb; if(a.c.type==='Action' && b.c.type==='Action') return a.c.name.localeCompare(b.c.name); if(a.c.type==='Treasure' && b.c.type==='Treasure') return (b.c.value||0)-(a.c.value||0) || a.c.name.localeCompare(b.c.name); if(a.c.type==='Victory' && b.c.type==='Victory') return (b.c.points||0)-(a.c.points||0) || a.c.name.localeCompare(b.c.name); return a.c.name.localeCompare(b.c.name); });
  indexed.forEach(({c,idx})=>{
    if(canPlayAction || canPlayTreasure){ el.classList.add('playable'); el.onclick = ()=>play(idx); }
    else { el.classList.add('disabled'); el.onclick = null; }
    hand.appendChild(el);
  });

  // Buttons
  document.getElementById('undoBtn').onclick = undo;

  const changed = maybeAutoAdvance();
  if(changed) return render();
}





// ------------------- Turn Flow -------------------

// ------------------- AI -------------------

// ------------------- Keyboard Shortcuts -------------------


// ------------------- Chat Bot (persisted) -------------------
};

// ------------------- Sanity / smoke checks -------------------

// ------------------- Start -------------------
init();</script>
<style>
/* Build 04: Force coin/action/victory card backgrounds to #E5E7EB */
.card.coin, .card.action, .card.victory,
.coin-card, .action-card, .victory-card,
[data-card-type="coin"], [data-card-type="action"], [data-card-type="victory"],
.card[data-card-type="coin"], .card[data-card-type="action"], .card[data-card-type="victory"] {
  background: #E5E7EB !important;
  background-color: #E5E7EB !important;
}
</style><style>
#build-badge {
  position: fixed;
  left: 12px;
  bottom: 12px;
  z-index: 1000000;
  font-family: ui-sans-serif, system-ui, Arial, sans-serif;
  font-size: 12px;
  padding: 8px 10px;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.15);
  background: rgba(17,24,39,0.9);
  color: #fff;
  user-select: none;
  cursor: default;
}
</style></head>
<body>
<div class="app">
<div class="topbar">
<div class="top-left">
<h1>Dominion â€” POC (You vs AI)</h1>
<div class="control-line"><label class="pill toggle"><input id="autoAdvance" type="checkbox"/> Auto-advance phases</label></div>
<div class="control-line"><label class="pill toggle"><input id="debugAICheck" type="checkbox"/> Watch the AI</label></div>
<div class="control-line">
<label class="pill toggle">AI:
            <select id="aiMode">
<option value="weak">Weak</option>
<option selected="" value="strong">Strong</option>
</select>
</label>
</div>
</div>
<div class="topbar-right">
<!-- Stacked controls with equal width -->
<button class="btn" id="newGameBtn">New Game</button>
<button class="btn" id="tutorialBtn" title="Show the tutorial">Tutorial</button>
<div class="sound-controls">
<span>ðŸ”Š</span>
<input id="vol" max="100" min="0" step="1" type="range"/>
<label class="toggle" style="margin-left:auto"><input id="muteToggle" type="checkbox"> Mute</input></label>
</div>
</div>
</div>
<div class="row">
<div class="panel">
<h2>Supply</h2>
<div class="supplySections" id="supply"></div>
</div>
<div class="panel">
<h2>AI Status &amp; Log</h2>
<div class="log" id="ai-status">Waiting for your turnâ€¦</div>
<div class="log mono" id="ai-debug" style="display:none"></div>
<div class="log mono" id="log">Action &gt; Treasure &gt; Buy. Once you buy, you can't play more cards this turn.</div>
</div>
</div>
<div class="row" style="margin-top:16px">
<div class="panel">
<h2>Game Status</h2>
<div class="stats-rows">
<div class="stats">
<span class="pill score">Score: <span style="opacity:.9">You</span> <strong id="pScore">0</strong> Â· AI <strong id="aScore">0</strong></span>
</div>
<div class="stats">
<span class="pill">Phase: <strong id="phase">Action</strong></span>
</div>
<div class="stats">
<span class="pill">Actions: <strong id="actions">1</strong></span>
<span class="pill">Buys: <strong id="buys">1</strong></span>
<span class="pill">Coins: <strong id="coins">0</strong></span>
</div>
</div>
</div>
<div class="panel">
<h2>Your Cards</h2>
<div class="countsList" id="playerCounts"></div>
</div>
</div>
<div class="panel playArea" style="margin-top:16px">
<h2>Your Hand</h2>
<div class="hand" id="player-hand"></div>
<div class="actions" style="display:flex;gap:10px;align-items:center;padding:0 12px 12px;flex-wrap:wrap">
<button class="btn" id="toBuyBtn" style="width:auto" title="B">Go to Buy Phase</button>
<button class="btn" id="autoTreasureBtn" style="width:auto" title="T">Auto-Play Treasures</button>
<button class="btn" id="undoBtn" style="width:auto" title="Z">Undo last</button>
<button class="btn" id="endTurnBtn" style="width:auto" title="E">End Turn</button>
</div>
<div class="log mono" style="opacity:.85;padding:0 12px 12px">Shortcuts: A=play Action, T=auto-Treasure, B=Buy, E=End Turn, Z=Undo</div>
</div>
</div>
<!-- Chat ALWAYS open -->
<div class="chat-panel" id="chatPanel">
<div class="chat-head"><span class="title">Table Talk</span><div class="tools"><button class="btn" id="clearChat" style="width:auto" title="Clear chat">ðŸ§¹</button></div></div>
<div class="chat-body" id="chatBody"></div>
<div class="chat-input"><input id="chatInput" placeholder="Say somethingâ€¦"/><button id="chatSend">Send</button></div>
</div>
<div class="toast" id="toast"></div>
<div class="build" id="build"></div>
<div class="overlay" id="overlay">
<div class="modal" id="modal">
<h3 id="winnerTitle">Game Over</h3>
<p id="winnerDetail"></p>
<div class="footer"><button class="btn" onclick="location.reload()" style="width:auto">New Game</button></div>
</div>
</div>
<!-- Choice overlay (e.g., Workshop) -->
<div class="overlay" id="choiceOverlay">
<div class="modal" id="choiceModal">
<h3 id="choiceTitle">Gain a card</h3>
<p id="choiceDetail">Pick a card.</p>
<div class="supplyGrid" id="choiceGrid"></div>
</div>
</div>
<!-- Guided tour overlay -->
<div class="overlay coach" id="coach" style="background:rgba(2,6,23,.45)">
<div class="modal step" id="coachStep" style="left:40px;top:40px;min-width:300px">
<div class="title" id="coachTitle" style="font-weight:800;margin-bottom:4px;color:#fff">Welcome!</div>
<div id="coachText" style="color:#D1D5DB">Letâ€™s do a quick tour.</div>
<div class="controls" style="display:flex;gap:8px;margin-top:10px">
<button class="btn" id="coachSkip" style="width:auto">Skip</button>
<button class="btn" id="coachNext" style="width:auto">Next â†’</button>
</div>
</div>
</div>
<div class="tooltip" id="tooltip"></div>
<div id="build-badge">Build 05 â€” 2025-08-12</div><script>console.log('[Dominion] Build 05 â€” 2025-08-12 loaded');</script></body>
</html>
